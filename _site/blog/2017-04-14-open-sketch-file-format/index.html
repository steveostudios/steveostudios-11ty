<article><p>Recently Sketch 43 introduced a new “open” file format in. I’m super fascinated by the idea of an open file format. I wanted to know more about what <em>exactly</em> that means, because it could open up a world of possibility, one which is currently <em>closed</em> (pun intended) by Sketch’s competitors.</p>
<p>So I set out to find out more. Here are my findings.</p>
<p>I started by creating a folder with nothing in it. I then created a new Sketch document in that folder. I didn’t do anything to it (not even scroll or zoom inside).</p>
<p>Now, generally with “open” file formats you can just drag-n-drop the file into a text editor and, boop-boop-beep, you can read the contents. However, when I tried to open my new Sketch file in my text editor, I got this:</p>
<p><img src="./open-sketch-file-format-1.jpg" alt="A robot threw-up on my screen"></p>
<p>Hmmm. Okay, so not totally human readable. There are a couple of bits in here that are readable though… specifically the phrases <code>user.json</code> and <code>document.json</code>. A JSON file is type of file that is basically an organized list of data. These must refer to JSON files somewhere on my computer. This looks compelling, but I have no idea where those files are. Which got me thinking. Maybe the file is zipped?</p>
<p>So, I tried right-clicking on the file to unzip. No luck. So I fired up Terminal an tried this (I did this in the directory of my Sketch file, which is called <code>git_demo.sketch</code>):</p>
<pre class="language-shell"><code class="language-shell">$ <span class="token function">unzip</span> git_demo.sketch<br>Archive: git_demo.sketch<br>inflating: document.json<br> inflating: pages/4E872A8F-0CE4-474F-A6D4-9C22990C9E9B.json<br> inflating: user.json<br> inflating: meta.json<br> inflating: previews/preview.png</code></pre>
<p>Whoa! There we go. I see it even found a <code>user.json</code> and <code>document.json</code>. that were alluded to earlier. That’s cool!</p>
<p>Now, let’s take a look at what these files probably are (I say <em>probably</em> because it’s all conjecture. I have no idea what Sketch does behind the scenes):</p>
<h2>document.json</h2>
<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span><br>  <span class="token property">"_class"</span><span class="token operator">:</span> <span class="token string">"document"</span><span class="token punctuation">,</span><br>  <span class="token property">"do_objectID"</span><span class="token operator">:</span> <span class="token string">"45DEEB9C-77D3-42C1-8466-A3A26388931A"</span><span class="token punctuation">,</span><br>  <span class="token property">"assets"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"_class"</span><span class="token operator">:</span> <span class="token string">"assetCollection"</span><span class="token punctuation">,</span><br>    <span class="token property">"colors"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br>    <span class="token property">"gradients"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br>    <span class="token property">"imageCollection"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>      <span class="token property">"_class"</span><span class="token operator">:</span> <span class="token string">"imageCollection"</span><span class="token punctuation">,</span><br>      <span class="token property">"images"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><span class="token punctuation">,</span><br>    <span class="token property">"images"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token property">"currentPageIndex"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span><br>  <span class="token property">"enableLayerInteraction"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br>  <span class="token property">"enableSliceInteraction"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br>  <span class="token property">"foreignSymbols"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br>  <span class="token property">"layerStyles"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"_class"</span><span class="token operator">:</span> <span class="token string">"sharedStyleContainer"</span><span class="token punctuation">,</span><br>    <span class="token property">"objects"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token property">"layerSymbols"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"_class"</span><span class="token operator">:</span> <span class="token string">"symbolContainer"</span><span class="token punctuation">,</span><br>    <span class="token property">"objects"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token property">"layerTextStyles"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"_class"</span><span class="token operator">:</span> <span class="token string">"sharedTextStyleContainer"</span><span class="token punctuation">,</span><br>    <span class="token property">"objects"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token property">"pages"</span><span class="token operator">:</span> <span class="token punctuation">[</span><br>    <span class="token punctuation">{</span><br>      <span class="token property">"_class"</span><span class="token operator">:</span> <span class="token string">"MSJSONFileReference"</span><span class="token punctuation">,</span><br>      <span class="token property">"_ref_class"</span><span class="token operator">:</span> <span class="token string">"MSImmutablePage"</span><span class="token punctuation">,</span><br>      <span class="token property">"_ref"</span><span class="token operator">:</span> <span class="token string">"pages/4E872A8F-0CE4-474F-A6D4-9C22990C9E9B"</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">]</span><br><span class="token punctuation">}</span></code></pre>
<p>In here you can find things like <code>colors</code>, <code>gradients</code>, <code>symbols</code>, <code>images</code>, and <code>layers</code>. It looks like this is global settings are stored. I also see in here is a list of <code>pages</code> and <code>artboards</code>. I can see a reference to <code>pages/4E872A8F-0CE4–474F-A6D4–9C22990C9E9B.json</code> so let’s take a look at that next.</p>
<h2>pages/4E872A8F-0CE4–474F-A6D4–9C22990C9E9B.json</h2>
<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span><br>  <span class="token property">"_class"</span><span class="token operator">:</span> <span class="token string">"page"</span><span class="token punctuation">,</span><br>  <span class="token property">"do_objectID"</span><span class="token operator">:</span> <span class="token string">"4E872A8F-0CE4-474F-A6D4-9C22990C9E9B"</span><span class="token punctuation">,</span><br>  <span class="token property">"exportOptions"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"_class"</span><span class="token operator">:</span> <span class="token string">"exportOptions"</span><span class="token punctuation">,</span><br>    <span class="token property">"exportFormats"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br>    <span class="token property">"includedLayerIds"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br>    <span class="token property">"layerOptions"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span><br>    <span class="token property">"shouldTrim"</span><span class="token operator">:</span> <span class="token boolean">false</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token property">"frame"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"_class"</span><span class="token operator">:</span> <span class="token string">"rect"</span><span class="token punctuation">,</span><br>    <span class="token property">"constrainProportions"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br>    <span class="token property">"height"</span><span class="token operator">:</span> <span class="token number">300</span><span class="token punctuation">,</span><br>    <span class="token property">"width"</span><span class="token operator">:</span> <span class="token number">300</span><span class="token punctuation">,</span><br>    <span class="token property">"x"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span><br>    <span class="token property">"y"</span><span class="token operator">:</span> <span class="token number">0</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token property">"isFlippedHorizontal"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br>  <span class="token property">"isFlippedVertical"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br>  <span class="token property">"isLocked"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br>  <span class="token property">"isVisible"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br>  <span class="token property">"layerListExpandedType"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span><br>  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Page 1"</span><span class="token punctuation">,</span><br>  <span class="token property">"nameIsFixed"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br>  <span class="token property">"resizingType"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span><br>  <span class="token property">"rotation"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span><br>  <span class="token property">"shouldBreakMaskChain"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br>  <span class="token property">"style"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"_class"</span><span class="token operator">:</span> <span class="token string">"style"</span><span class="token punctuation">,</span><br>    <span class="token property">"endDecorationType"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span><br>    <span class="token property">"miterLimit"</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span><br>    <span class="token property">"startDecorationType"</span><span class="token operator">:</span> <span class="token number">0</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token property">"hasClickThrough"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br>  <span class="token property">"layers"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br>  <span class="token property">"horizontalRulerData"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"_class"</span><span class="token operator">:</span> <span class="token string">"rulerData"</span><span class="token punctuation">,</span><br>    <span class="token property">"base"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span><br>    <span class="token property">"guides"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token property">"includeInCloudUpload"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br>  <span class="token property">"verticalRulerData"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"_class"</span><span class="token operator">:</span> <span class="token string">"rulerData"</span><span class="token punctuation">,</span><br>    <span class="token property">"base"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span><br>    <span class="token property">"guides"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
<p>This looks like all of the data associated with my page (I only have one, since it’s a brand-spanking new file). I can see rulers, the page name, page size and a few other cool things in here. Note there are no <code>layers</code>. Also worth mentioning is the <em>name</em> of this file. <code>4E872A8...</code> is probably a randomly generated number, so you could in theory have tons of pages and none of them conflict with each other.</p>
<h2>user.json</h2>
<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span><br>  <span class="token property">"B79428F3-B5ED-4FB8-A32F-4A3731702ADA"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"pageListHeight"</span><span class="token operator">:</span> <span class="token number">-1</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token property">"4E872A8F-0CE4-474F-A6D4-9C22990C9E9B"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"scrollOrigin"</span><span class="token operator">:</span> <span class="token string">"{0, 0}"</span><span class="token punctuation">,</span><br>    <span class="token property">"zoomValue"</span><span class="token operator">:</span> <span class="token number">1</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
<p>This looks like it’s mostly stuff relating to <em>you</em> and your Sketch file. Stuff like your <code>zoom</code> and <code>scroll</code>. When you open up your Sketch project the next time, you want it to be just how you left it. Here is where that stuff gets stored.</p>
<h2>meta.json</h2>
<pre><code>json{
&quot;commit&quot;: &quot;335a30073fcb2dc64a0abd6148ae147d694c887d&quot;,
&quot;appVersion&quot;: &quot;43.1&quot;,
&quot;build&quot;: 39012,
&quot;app&quot;: &quot;com.bohemiancoding.sketch3&quot;,
&quot;pagesAndArtboards&quot;: {
&quot;4E872A8F-0CE4-474F-A6D4-9C22990C9E9B&quot;: {
&quot;name&quot;: &quot;Page 1&quot;,
&quot;artboards&quot;: {}
}
},
&quot;fonts&quot;: [],
&quot;created&quot;: {
&quot;app&quot;: &quot;com.bohemiancoding.sketch3&quot;,
&quot;commit&quot;: &quot;335a30073fcb2dc64a0abd6148ae147d694c887d&quot;,
&quot;build&quot;: 39012,
&quot;appVersion&quot;: &quot;43.1&quot;,
&quot;variant&quot;: &quot;NONAPPSTORE&quot;,
&quot;version&quot;: 88
},
&quot;version&quot;: 88,
&quot;saveHistory&quot;: [&quot;NONAPPSTORE.39012&quot;],
&quot;autosaved&quot;: 0,
&quot;variant&quot;: &quot;NONAPPSTORE&quot;
}
</code></pre>
<p>This looks like all of the info that the app will need that has little or nothing to do with your artwork: the version of Sketch used to make the file, a list of pages and artboards, fonts, autosave, etc. No actual art will be stored here. I see another reference to <code>pages/4E872A8F-0CE4–474F-A6D4–9C22990C9E9B.json</code>. This must be another place that it attaches the name “Page 1” to my page.</p>
<h2>previews/preview.png</h2>
<p>The last thing in my file is a preview.png, which in Finder looks like this:
<img src="./open-sketch-file-format-2.jpg" alt="Look how beautiful!"></p>
<p>This is obviously the preview image that Sketch saves out. Most likely this is the image that Sketch uses on the startup screen where you can see recent Sketch files.</p>
<h2>Why is this cool?</h2>
<p>Well, for one, it’s super nerdy and I like that. 🤓</p>
<p>Two, you can alter your Sketch document <em>without opening it up in Sketch!</em> Let me show you.</p>
<p>In Terminal run:</p>
<pre class="language-shell"><code class="language-shell">$ <span class="token function">unzip</span> git_demo.sketch<br>Archive: git_demo.sketch<br>inflating: document.json<br> inflating: pages/4E872A8F-0CE4-474F-A6D4-9C22990C9E9B.json<br> inflating: user.json<br> inflating: meta.json<br> inflating: previews/preview.png</code></pre>
<p>This will unzip the Sketch file. Then open up <code>meta.json</code> and changed the line that says <code>“name”: “Page 1”</code> to :</p>
<pre class="language-json"><code class="language-json"><span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Master Page"</span><span class="token punctuation">,</span></code></pre>
<p>Then you should change the same thing in <code>pages/4E872A8F-0CE4–474F-A6D4–9C22990C9E9B.json</code> (we’re changing it in both places because I don’t actually know which one (or both) Sketch is using to read the page name and I don’t want to break my file):</p>
<pre class="language-json"><code class="language-json"><span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Master Page"</span><span class="token punctuation">,</span></code></pre>
<p>Then we need to zip it up again. I’m going to save it as a new file so I don’t screw up my old file:</p>
<pre class="language-shell"><code class="language-shell">$ <span class="token function">zip</span> git_demo2.sketch document.json pages/4E872A8F-0CE4-474F-A6D4-9C22990C9E9B.json user.json meta.json previews/preview.png<br>adding: document.json <span class="token punctuation">(</span>deflated <span class="token number">50</span>%<span class="token punctuation">)</span><br>adding: pages/4E872A8F-0CE4-474F-A6D4-9C22990C9E9B.json <span class="token punctuation">(</span>deflated <span class="token number">49</span>%<span class="token punctuation">)</span><br>adding: user.json <span class="token punctuation">(</span>deflated <span class="token number">10</span>%<span class="token punctuation">)</span><br>adding: meta.json <span class="token punctuation">(</span>deflated <span class="token number">46</span>%<span class="token punctuation">)</span><br>adding: previews/preview.png <span class="token punctuation">(</span>deflated <span class="token number">89</span>%<span class="token punctuation">)</span></code></pre>
<p>(All I did here is <em>zip</em> all of the individual files into a file called <code>git_demo2.sketch</code>.</p>
<p>Now, double-click on your newly created <code>git_demo2.sketch</code> file and this is what you should see:</p>
<p><img src="./open-sketch-file-format-3.jpg" alt="I am the MASTER! MUHAHAH!"></p>
<p>Pretty slick, huh!</p>
<p>Traditionally proprietary, closed file formats never let you edit their files. You needed X program to open X files (hah). But now a plugin developers can create things that run in conjunction with Sketch. You can have a web app to share and collaborate on <code>Sketch</code> files. You can have plugin to run Sketch files through and change all of your reds to light-blues. You can have scripts that automatically grab key info to drop into a CSS file. The possibilities are endless now! All thanks to an open file format.</p>
</article>